{% extends "base.html" %}
{% load staticfiles %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/personal_details.css' %}">
{% endblock %}

{% block content %}
<div class="card text-white mt-2">
  <form class="form-row card-body" method="get" action=".">
    <div class="col-xs-1">
      <input class="form-control" id="id_staff_no" name="staff_no" type="number" placeholder="Employee ID" value="{{staff_no}}">
    </div>
    <div class="col-xs-1">
      <input class="form-control" id="id_name" name="name" type="text" placeholder="Name" value="{{name}}">
    </div>
    <div class="col-xs-1">
      <input class="form-control dateinput" id="id_join_date" name="join_date" type="text" placeholder="Join Date" value="{{join_date}}">
    </div>
    <button type="submit" class="btn btn-secondary">Filter</button>
  </form>
</div>

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Employee ID
        <a href="?order_by=staff_no&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-up"></a>
        <a href="?order_by=-staff_no&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-down"></a>
      </th>
      <th>
        Name
        <a href="?order_by=last_name&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-up"></a>
        <a href="?order_by=-last_name&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-down"></a>
      </th>
      <th>
        Date Joined
        <a href="?order_by=join_date&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-up"></a>
        <a href="?order_by=-join_date&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-down"></a>
      </th>
      <th>
        Email
        <a href="?order_by=email&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-up"></a>
        <a href="?order_by=-email&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-down"></a>
      </th>
      <th>
        Status
        <a href="?order_by=active&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-up"></a>
        <a href="?order_by=-active&staff_no={{staff_no}}&last_name={{last_name}}&first_name={{first_name}}&join_date={{join_date}}" class="fas fa-caret-down"></a>
      </th>
      <th>Action</th>
      <!-- <th></th> -->
    </tr>
  </thead>
  <tbody>
    {% for e in employees %}
    <tr>
      <td>{{e.staff_no}}</td>
      <td>{{e.last_name|add:" "|add:e.first_name}}</td>
      <td>{{e.join_date|date:"d/m/Y"}}</td>
      <td>{{e.email}}</td>
      <td>
        {% if e.active %}
        Active
        {% else %}
        Inactive
        {% endif %}
      </td>
      <td>
        <a href="{% url 'personal_details:update_staff' e.staff_no %}" class="btn btn-info" role="button">Edit Details</a>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="footer clearfix">
  <a href="{% url 'personal_details:create_staff' %}" class="btn btn-primary" role="button">Add New Staff</a>
  {% include "pagination.html" %}
</div>
{% endblock %}