{% extends "base.html" %}

{% block content %}
<!-- <div class="card text-white mt-2">
  <form class="form-row card-body" method="get" action=".">
    <div class="col-xs-1">
      <input class="form-control" id="id_staff_no" name="staff_no" type="number" placeholder="Employee ID" value="{{staff_no}}">
    </div>
    <div class="col-xs-1">
      <input class="form-control" id="id_last_name" name="last_name" type="text" placeholder="Last Name" value="{{last_name}}">
    </div>
    <div class="col-xs-1">
      <input class="form-control" id="id_first_name" name="first_name" type="text" placeholder="First Name" value="{{first_name}}">
    </div>
    <div class="col-xs-1">
      <input class="form-control dateinput" id="id_join_date" name="join_date" type="text" placeholder="Join Date" value="{{join_date}}">
    </div>
    <button type="submit" class="btn btn-secondary">Filter</button>
  </form>
</div> -->

<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Pay Period
        <a href="?order_by=period_start" class="fas fa-caret-up"></a>
        <a href="?order_by=-period_start" class="fas fa-caret-down"></a>
      </th>
      <th>
        Employee
        <a href="?order_by=employee" class="fas fa-caret-up"></a>
        <a href="?order_by=-employee" class="fas fa-caret-down"></a>
      </th>
      <th>
        Pay Method
        <a href="?order_by=method" class="fas fa-caret-up"></a>
        <a href="?order_by=-method" class="fas fa-caret-down"></a>
      </th>
      <th>
        Pay Amount ($)
        <a href="?order_by=net_pay" class="fas fa-caret-up"></a>
        <a href="?order_by=-net_pay" class="fas fa-caret-down"></a>
      </th>
      <th>
        Status
        <a href="?order_by=status" class="fas fa-caret-up"></a>
        <a href="?order_by=-status" class="fas fa-caret-down"></a>
      </th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for p in payments %}
    <tr>
      <td>{{p.period_start|date:"d/m/Y"}} - {{p.period_end|date:"d/m/Y"}}</td>
      <td>{{p.employee.last_name|add:" "|add:p.employee.first_name}}</td>
      <td>{{p.method}}</td>
      <td>{{p.net_pay}}</td>
      <td>{{p.get_status_display}}</td>
      <td>
        {% if p.status == 'CC'%}
        <a href="{% url 'payroll:detail_payment' p.pk %}" class="btn btn-success" role="button">View Payment</a>
        {% else %}
        <a href="{% url 'payroll:update_payment' p.pk %}" class="btn btn-success" role="button">View Payment</a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="footer">
  {% include "pagination.html" %}
  <a href="{% url 'payroll:create_payment' %}" class="btn btn-primary" role="button">Add New Payment</a>
  <a href="{% url 'payroll:last_payment' %}" class="btn btn-warning" role="button">Add Last Payment</a>
</div>
{% endblock %}