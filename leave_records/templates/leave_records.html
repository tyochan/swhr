{% extends "base.html" %}
{% block content %}
<table class="table table-striped table-hover">
  <thead>
    <tr>
      <th>
        Start Date
        <a href="?order_by=start_date" class="fas fa-caret-up"></a>
        <a href="?order_by=-start_date" class="fas fa-caret-down"></a>
      </th>
      <th>
        End Date
        <a href="?order_by=end_date" class="fas fa-caret-up"></a>
        <a href="?order_by=-end_date" class="fas fa-caret-down"></a>
      </th>
      <th>
        Employee
        <a href="?order_by=employee" class="fas fa-caret-up"></a>
        <a href="?order_by=-employee" class="fas fa-caret-down"></a>
      </th>
      <th>
        Leave Type
        <a href="?order_by=type" class="fas fa-caret-up"></a>
        <a href="?order_by=-type" class="fas fa-caret-down"></a>
      </th>
      <th>
        Status
        <a href="?order_by=status" class="fas fa-caret-up"></a>
        <a href="?order_by=-status" class="fas fa-caret-down"></a>
      </th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    {% for l in leaves %}
    <tr>
      <td>{{l.start_date|date:"d/m/Y"}}</td>
      <td>{{l.end_date|date:"d/m/Y"}}</td>
      <td>{{l.employee.last_name|add:" "|add:l.employee.first_name}}</td>
      <td>{{l.get_type_display}}</td>
      <td>{{l.get_status_display}}</td>
      <td>
        {% if l.status == 'PD' %}
        <a href="{% url 'leave_records:update_leave' l.pk %}" class="btn btn-info" role="button">Amend Status</a>
        {% else %}
        <a href="{% url 'leave_records:detail_leave' l.pk %}" class="btn btn-success" role="button">Check Record</a>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="footer">
  {% include "pagination.html" %}
  <a href="{% url 'leave_records:create_leave' %}" class="btn btn-primary" role="button">Add New Leave</a>
</div>
{% endblock %}